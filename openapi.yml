openapi: 3.0.1
info:
  title: Pier API
  version: ''
paths:
  /applications/:
    post:
      operationId: ApplicationsService.create
      tags:
        - Applications
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
              examples:
                Example1:
                  value:
                    id: app_f0467657bba948e6a87292e182132848
                    borrower_id: bor_a1d0c30d77104f35b4c842b99132624e
                    credit_type: installment_loan
                    status: pending
                    created_on: '2022-12-31T01:36:52.606Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
              examples:
                Example1:
                  value:
                    error_type: BORROWER_ERROR
                    error_code: BORROWER_NOT_FOUND
                    error_message: The borrower resource does not exist
      summary: Create an application
      security: &ref_0
        - BasicAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateApplicationRequest'
            examples:
              Example1:
                value:
                  borrower_id: bor_a1d0c30d77104f35b4c842b99132624e
                  credit_type: revolving_line_of_credit
                  requested_amount: 200000
              Example2:
                value:
                  borrower_id: bor_a1d0c30d77104f35b4c842b99132624e
                  credit_type: revolving_line_of_credit
                  requested_amount: 200000
              Example3:
                value:
                  borrower_id: bor_a1d0c30d77104f35b4c842b99132624e
                  credit_type: revolving_line_of_credit
                  requested_amount: 200000
    get:
      description: List all applications associated with your account
      operationId: ApplicationsService.getAll
      tags:
        - Applications
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Application'
      summary: List all applications
      security: *ref_0
  /applications/{application_id}/approve:
    post:
      operationId: ApplicationsService.approve
      tags:
        - Applications
      parameters:
        - name: application_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ApplicationId'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Approve an application
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApproveApplicationRequest'
  /applications/{application_id}/reject:
    post:
      description: >-
        Updates the status of a credit application to `REJECTED` and returns a
        user readable rejection reason, to be used in the adverse action notice
      operationId: ApplicationsService.reject
      tags:
        - Applications
      parameters:
        - name: application_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ApplicationId'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Reject an application
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RejectRequest'
  /applications/{application_id}:
    get:
      description: Get an application by its id
      operationId: ApplicationsService.get
      tags:
        - Applications
      parameters:
        - name: application_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ApplicationId'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Get an application by ID
      security: *ref_0
  /borrowers/business:
    post:
      description: Creates a business borrower. Business borrowers must have a unique EIN.
      operationId: BorrowersService.createBusinessBorrower
      tags:
        - Borrowers
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessBorrower'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Market St
                      line_2: null
                      city: San Francisco
                      state: NJ
                      zip: '94133'
                    business_contact:
                      first_name: alex
                      last_name: montana
                      phone: '4155555555'
                      email: alex@acme.co
                      title: COO
                    beneficial_owners:
                      - address:
                          line_1: 15 Market St
                          line_2: null
                          city: San Francisco
                          state: CA
                          zip: '91133'
                        date_of_birth: '1991-12-18'
                        email: jdoe@acme.com
                        first_name: Jane
                        last_name: Dough
                        percent_ownership: 2500
                        phone: '4155555555'
                        ssn: '123456789'
                        id: 63ae91f8eae458cb0d79f77e
                    id: bor_18e5a3726b3943cda2635f40e1041ba4
                    business_name: Apple Landscaping
                    business_type: corporation
                    dba_name: Apple Landscaping
                    ein: '130256721'
                    incorporation_date: '2000-12-12'
                    kyb_completion_date: '2022-11-15'
                    phone: '4152556465'
                    state_of_incorporation: DE
                    created_on: '2022-12-30T07:23:36.665Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Create a business borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BusinessBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Market St
                    line_2: null
                    city: San Francisco
                    state: NJ
                    zip: '94133'
                  business_contact:
                    first_name: alex
                    last_name: montana
                    phone: '4155555555'
                    email: alex@acme.co
                    title: COO
                  beneficial_owners:
                    - address:
                        line_1: 15 Market St
                        line_2: null
                        city: San Francisco
                        state: CA
                        zip: '91133'
                      date_of_birth: '1991-12-18'
                      email: jdoe@acme.com
                      first_name: Jane
                      last_name: Dough
                      percent_ownership: 2500
                      phone: '4155555555'
                      ssn: '123456789'
                      id: 63ae91f8eae458cb0d79f77e
                  business_name: Apple Landscaping
                  business_type: corporation
                  dba_name: Apple Landscaping
                  ein: '130256721'
                  incorporation_date: '2000-12-12'
                  kyb_completion_date: '2022-11-15'
                  phone: '4152556465'
                  state_of_incorporation: DE
  /borrowers/business/{borrower_id}:
    patch:
      description: >-
        Updates an existing borrower. The full borrower object needs to be
        supplied in the update request.
      operationId: BorrowersService.updateBusinessBorrower
      tags:
        - Borrowers
      parameters:
        - name: borrower_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/BusinessBorrowerId'
          examples:
            Example1:
              value: bor_18e5a3726b3943cda2635f40e1041ba4
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessBorrower'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Market St
                      line_2: null
                      city: San Francisco
                      state: NJ
                      zip: '94133'
                    business_contact:
                      first_name: alex
                      last_name: montana
                      phone: '4155555555'
                      email: alex@acme.co
                      title: COO
                    beneficial_owners:
                      - address:
                          line_1: 15 Market St
                          line_2: null
                          city: San Francisco
                          state: CA
                          zip: '91133'
                        date_of_birth: '1991-12-18'
                        email: jdoe@acme.com
                        first_name: Jane
                        last_name: Dough
                        percent_ownership: 2500
                        phone: '4155555555'
                        ssn: '123456789'
                        id: 63ae91f8eae458cb0d79f77e
                    id: bor_18e5a3726b3943cda2635f40e1041ba4
                    business_name: Apple Landscaping
                    business_type: corporation
                    dba_name: Apple Landscaping
                    ein: '130256721'
                    incorporation_date: '2000-12-12'
                    kyb_completion_date: '2022-11-15'
                    phone: '4152556465'
                    state_of_incorporation: DE
                    created_on: '2022-12-30T07:23:36.665Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Update a business borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BusinessBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Market St
                    line_2: null
                    city: San Francisco
                    state: NJ
                    zip: '94133'
                  business_contact:
                    first_name: alex
                    last_name: montana
                    phone: '4155555555'
                    email: alex@acme.co
                    title: COO
                  beneficial_owners:
                    - address:
                        line_1: 15 Market St
                        line_2: null
                        city: San Francisco
                        state: CA
                        zip: '91133'
                      date_of_birth: '1991-12-18'
                      email: jdoe@acme.com
                      first_name: Jane
                      last_name: Dough
                      percent_ownership: 2500
                      phone: '4155555555'
                      ssn: '123456789'
                      id: 63ae91f8eae458cb0d79f77e
                  business_name: Apple Landscaping
                  business_type: corporation
                  dba_name: Apple Landscaping
                  ein: '130256721'
                  incorporation_date: '2000-12-12'
                  kyb_completion_date: '2022-11-15'
                  phone: '4152556465'
                  state_of_incorporation: DE
  /borrowers/consumer:
    post:
      description: Creates a consumer borrower. Consumer borrower's must have a unique SSN.
      operationId: BorrowersService.createConsumerBorrower
      tags:
        - Borrowers
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsumerBorrower'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Main Street
                      line_2: null
                      city: Austin
                      state: TX
                      zip: '73301'
                    id: bor_a1d0c30d77104f35b4c842b99132624e
                    date_of_birth: '1991-12-18'
                    email: jdough@acme.co
                    first_name: Jane
                    last_name: Dough
                    ssn: '999888777'
                    kyc_completion_date: '2022-11-15'
                    created_on: '2022-12-31T00:58:47.828Z'
                    phone: '2065886919'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
              examples:
                Example1:
                  value:
                    error_type: BORROWER_ERROR
                    error_code: DUPLICATE_SSN
                    error_message: A borrower with that SSN already exists
      summary: Create a consumer borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConsumerBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
              Example2:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
              Example3:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
  /borrowers/consumer/{borrower_id}:
    patch:
      operationId: BorrowersService.updateConsumerBorrower
      tags:
        - Borrowers
      parameters:
        - name: borrower_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ConsumerBorrowerId'
          examples:
            Example1:
              value: bor_a1d0c30d77104f35b4c842b99132624e
            Example2:
              value: bor_a1d0c30d77104f35b4c842b99132624e
            Example3:
              value: bor_a1d0c30d77104f35b4c842b99132624e
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsumerBorrower'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Main Street
                      line_2: null
                      city: Austin
                      state: TX
                      zip: '73301'
                    id: bor_a1d0c30d77104f35b4c842b99132624e
                    date_of_birth: '1991-12-18'
                    email: jdough@acme.co
                    first_name: Jane
                    last_name: Dough
                    ssn: '999888777'
                    kyc_completion_date: '2022-11-15'
                    created_on: '2022-12-31T00:58:47.828Z'
                    phone: '2065886919'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
              examples:
                Example1:
                  value:
                    error_type: BORROWER_ERROR
                    error_code: BORROWER_NOT_FOUND
                    error_message: A borrower resource does not exist
      summary: Update a consumer borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConsumerBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
              Example2:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
              Example3:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
  /borrowers/{borrower_id}:
    get:
      description: Retrieve one borrower by id
      operationId: BorrowersService.getBorrower
      tags:
        - Borrowers
      parameters:
        - name: borrower_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ConsumerBorrowerId'
          examples:
            Example1:
              value: bor_a1d0c30d77104f35b4c842b99132624e
            Example2:
              value: bor_a1d0c30d77104f35b4c842b99132624e
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsumerBorrower'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Main Street
                      line_2: null
                      city: Austin
                      state: TX
                      zip: '73301'
                    id: bor_a1d0c30d77104f35b4c842b99132624e
                    date_of_birth: '1991-12-18'
                    email: jdough@acme.co
                    first_name: Jane
                    last_name: Dough
                    ssn: '999888777'
                    kyc_completion_date: '2022-11-15'
                    created_on: '2022-12-31T00:58:47.828Z'
                    phone: '2065886919'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
              examples:
                Example1:
                  value:
                    error_type: BORROWER_ERROR
                    error_code: BORROWER_NOT_FOUND
                    error_message: The borrower resource does not exist
      summary: Retrieve a borrower by id
      security: *ref_0
  /borrowers/:
    get:
      description: Retrieve all borrowers associated with your account
      operationId: BorrowersService.getAllBorrowers
      tags:
        - Borrowers
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ConsumerBorrower'
      summary: List all borrowers
      security: *ref_0
  /coverage/commercial:
    get:
      description: Retrieve state-by-state commercial coverage
      operationId: CoverageAndUtilityService.retrieveCommercialCoverage
      tags:
        - Coverage
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommercialCoverage'
      summary: Retrieve commercial lending coverage
      security: *ref_0
  /coverage/consumer:
    get:
      description: Retrieve state-by-state consumer coverage list
      operationId: CoverageAndUtilityService.retrieveConsumerCoverage
      tags:
        - Coverage
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema: {}
      summary: Retrieve consumer lending coverage
      security: *ref_0
  /rejection_reasons:
    post:
      description: >-
        Retrieve a list of valid reasons to reject an applicant, along with
        descriptions for each reason
      operationId: CoverageAndUtilityService.retrieveRejectionReasons
      tags:
        - Coverage
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RejectionReasons'
      summary: Retrieve rejection reasons
      security: *ref_0
  /facilities/:
    post:
      description: >-
        A facility can be created for a given loan agreement with a status of
        `signed`
      operationId: FacilitiesService.create
      tags:
        - Facilities
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Create a facility
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFacilityRequest'
    get:
      description: List all facilities on your account
      operationId: FacilitiesService.listAll
      tags:
        - Facilities
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Facility'
      summary: List all facilities
      security: *ref_0
  /facilities/{facility_id}/close:
    post:
      description: Closes an active facility by setting its status to `closed`
      operationId: FacilitiesService.close
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Close a facility
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CloseFacilityRequest'
  /loan_agreements/:
    post:
      description: >-
        A loan agreement can be created for an application with a status of
        approved. Expect 4-8 seconds of latency
      operationId: LoansService.create
      tags:
        - Loans
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoanAgreement'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Create a loan agreement
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLoanAgreementRequest'
    get:
      description: List all loan agreements on your account
      operationId: LoansService.getAll
      tags:
        - Loans
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LoanAgreement'
      summary: List all loan agreements
      security: *ref_0
  /loan_agreements/{loan_agreement_id}/sign:
    post:
      description: >-
        Electronically signs a loan document and updates the application's
        status to `accepted`
      operationId: LoansService.sign
      tags:
        - Loans
      parameters:
        - name: loan_agreement_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/LoanAgreementId'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignLoanAgreementResponse'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Sign a loan agreement
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignLoanAgreementRequest'
  /loan_agreements/{loan_agreement_id}:
    get:
      description: Retrieve a loan agreement by its id
      operationId: LoansService.get
      tags:
        - Loans
      parameters:
        - name: loan_agreement_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/LoanAgreementId'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoanAgreement'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FacilityCannotBeClosed'
      summary: Get a loan agreement by id
      security: *ref_0
components:
  schemas:
    ApplicationId:
      type: string
    ApplicationStatus:
      type: string
      enum:
        - pending
        - approved
        - accepted
        - rejected
        - expired
    CreateApplicationRequest:
      type: object
      properties:
        borrower_id:
          type: string
          description: The `borrower_id` of the borrower the application is for
          example: bor_a1d0c30d77104f35b4c842b99132624e
        credit_type:
          type: string
          description: The type of credit product.
          example: revolving_line_of_credit
        requested_amount:
          type: integer
          description: >-
            If the borrower requests an amount in their application, the
            requested loan or credit line amount (in cents).
      required:
        - borrower_id
        - credit_type
    Application:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/ApplicationId'
        borrower_id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
          description: The `borrower_id` of the borrower the application belongs to
        credit_type:
          $ref: '#/components/schemas/CreditType'
          description: The type of credit product.
        status:
          $ref: '#/components/schemas/ApplicationStatus'
        created_on:
          type: string
          format: date-time
          description: Timestamp the application object is created on
        decisioned_on:
          type: string
          format: date-time
          description: Timestamp when the application is either approved or rejected on
        offer:
          $ref: '#/components/schemas/LoanOffer'
          description: >-
            If the application is approved, an object containing the credit
            offer details
    LineOfCreditOffer:
      type: object
      properties:
        amount:
          type: integer
          description: >-
            The amount (in cents) of the credit line offer (e.g. '200000' for
            $2,000.00)
          example: 1000000
        apr:
          type: integer
          description: >-
            The apr (in basis points) of the credit line offer (e.g. '750' for
            7.50%)
          example: 0
        annual_fee:
          type: integer
          description: The annual fee charged for the credit line (e.g. '5000' for $50.00)
          example: 0
        billing_cycle:
          type: integer
          description: >
            The time in days between the last statement's closing date and the
            next statement's closing date. 

            For consumer lines of credit, the minimum is '21'
          example: 30
        finance_charge:
          type: integer
          description: >-
            If your platform charges a monthly finance charge for access to the
            line, the amount in cents
          example: 0
        grace_period:
          type: integer
          description: >-
            The time in days between the end of a billing cycle and the bill's
            due date. For consumer lines of credit, the minimum is '21'
          example: 21
        grace_period_interest_rate:
          type: integer
          description: >-
            The interest rate (in basis points) charged during the grace period.
            Must be '0' for consumer lines of credit. Defaults to `0` if omitted
        interest_rate:
          type: integer
          description: >-
            The interest rate (in basis points) of the loan or credit line offer
            (e.g. '750' for 7.50%)
          example: 0
        introductory_offer_interest_rate:
          type: integer
          description: >-
            If you offer an introductory period with a reduced interest rate,
            the interest rate in basis points
        introductory_offer_interest_rate_term:
          type: integer
          description: >-
            If you offer an introductory period with a reduced interest rate,
            the term in months
        late_payment_fee:
          type: integer
          description: >-
            The fee charged if a borrower misses the payment due date, in cents
            (e.g. '2500' for $25.00)
          example: 0
        origination_fee:
          type: integer
          description: >-
            The origination fee charged to originate the line in cents (e.g.
            '20000' for $200)
          example: 0
        term:
          type: integer
          description: The term of the line in months
          example: 24
      required:
        - amount
        - apr
        - annual_fee
        - billing_cycle
        - finance_charge
        - grace_period
        - interest_rate
        - late_payment_fee
        - origination_fee
        - term
    LoanOffer:
      type: object
      properties:
        amount:
          type: integer
        annual_fee:
          type: integer
        apr:
          type: integer
        finance_charge:
          type: integer
        grace_period:
          type: integer
        interest_rate:
          type: integer
        origination_fee:
          type: integer
        repayment_frequency:
          type: string
        late_payment_fee:
          type: integer
        term:
          type: integer
      required:
        - amount
        - annual_fee
        - apr
        - finance_charge
        - grace_period
        - interest_rate
        - origination_fee
        - repayment_frequency
        - late_payment_fee
        - term
    RejectRequest:
      type: object
      properties:
        rejection_reason:
          $ref: '#/components/schemas/RejectionReason'
      required:
        - rejection_reason
    RejectionReason:
      type: string
      enum:
        - income_too_low
        - bank_balance_too_low
        - income_unpredictable
        - user_account_duplicate
        - sdb_check_failed
        - bank_account_linking_error
        - mla_failed
        - iddoc_failed
        - no_checking_or_savings_data
        - insufficient_bank_history
        - loan_location_no_license
        - address_invalid
        - income_verification_failed
        - stacking_behavior
        - ssn_verification_failed
        - too_many_nsfs
        - fraud_risk_too_high
        - bankruptcy
        - processor_suspended
        - cash_flow_verification_failed
    GetApplicationRequest:
      type: object
      properties:
        application_id:
          type: string
          description: The id of the borrower you're requesting to retrieve
      required:
        - application_id
    ApproveApplicationRequest:
      type: object
      properties:
        offer:
          $ref: '#/components/schemas/LineOfCreditOffer'
        id:
          $ref: '#/components/schemas/ApplicationId'
        borrower_id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
        credit_type:
          $ref: '#/components/schemas/CreditType'
        status:
          $ref: '#/components/schemas/ApplicationStatus'
        created_on:
          type: string
          format: date-time
        decisioned_on:
          type: string
          format: date-time
      required:
        - offer
        - id
        - borrower_id
        - credit_type
        - status
        - created_on
        - decisioned_on
    BusinessBorrowerId:
      type: string
    BeneficialOwnerId:
      type: string
    ConsumerBorrowerId:
      type: string
    BusinessBorrowerRequest:
      type: object
      properties:
        address:
          $ref: '#/components/schemas/Address'
          description: The address of the business.
        beneficial_owners:
          type: array
          items:
            $ref: '#/components/schemas/BeneficialOwners'
          description: >
            An array of objects representing owners of the business and those
            who control the funds of the business. 

            If no one owns more than 25% of the business, just the individual
            who has ultimate control of the funds must be included. 

            A maximum of 5 objects can be added.
        business_contact:
          $ref: '#/components/schemas/BusinessContact'
          description: The person executing the loan agreement.
        business_name:
          type: string
          description: Legal name of the business.
          example: Apple Landscaping
        business_type:
          $ref: '#/components/schemas/BusinessType'
          description: The type of business entity.
        dba_name:
          type: string
          description: Doing-business-as name of the business
          example: Apple Landscaping
        ein:
          type: string
          description: >-
            9-digit IRS employee identification number of the business (e.g.
            345543221)
          example: '130256721'
        incorporation_date:
          type: string
          description: Incorporation date of the business (YYYY-MM-DD)
          example: '2000-12-12'
        kyb_completion_date:
          type: string
          description: Date kyb completed on the business (YYYY-MM-DD)
          example: '2022-11-15'
        state_of_incorporation:
          type: string
          description: Required 2-digit US state code (e.g. CA, IL, FL, …)
          example: DE
        phone:
          type: string
          description: The phone number of the business
          example: '4152556465'
      required:
        - address
        - beneficial_owners
        - business_contact
        - business_name
        - business_type
        - dba_name
        - ein
        - incorporation_date
        - kyb_completion_date
        - state_of_incorporation
        - phone
    BusinessBorrower:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/BusinessBorrowerId'
        address:
          $ref: '#/components/schemas/Address'
        beneficial_owners:
          type: array
          items:
            $ref: '#/components/schemas/BeneficialOwners'
          description: >
            An array of objects representing owners of the business and those
            who control the funds of the business. 

            If no one owns more than 25% of the business, just the individual
            who has ultimate control of the funds must be included. 

            A maximum of 5 objects can be added.
        business_contact:
          $ref: '#/components/schemas/BusinessContact'
          description: The person executing the loan agreement.
        business_name:
          type: string
          description: Legal name of the business
          example: Apple Landscaping
        business_type:
          $ref: '#/components/schemas/BusinessType'
          description: The type of business entity.
        created_on:
          type: string
          description: Time stamp of borrower's creation date
          example: '2022-12-30T07:23:36.665Z'
        dba_name:
          type: string
          description: Doing-business-as name of the business
          example: Apple Landscaping
        ein:
          type: string
          description: >-
            9-digit IRS employee identification number of the business (e.g.
            345543221)
          example: '130256721'
        incorporation_date:
          type: string
          description: Incorporation date of the business (YYYY-MM-DD)
          example: '2000-12-12'
        kyb_completion_date:
          type: string
          description: Date kyb completed on the business (YYYY-MM-DD)
          example: '2022-11-15'
        phone:
          type: string
          description: The phone number of the business
          example: '4152556465'
        state_of_incorporation:
          type: string
          description: Required 2-digit US state code (e.g. CA, IL, FL, …)
          example: DE
      required:
        - id
        - address
        - beneficial_owners
        - business_contact
        - business_name
        - business_type
        - created_on
        - dba_name
        - ein
        - incorporation_date
        - kyb_completion_date
        - phone
        - state_of_incorporation
    BeneficialOwners:
      type: object
      description: >-
        A person who owns owns 25% or more of the business as well as those who
        control the funds.
      properties:
        id:
          $ref: '#/components/schemas/BeneficialOwnerId'
        address:
          $ref: '#/components/schemas/Address'
          description: The person's address.
        date_of_birth:
          type: string
          description: The person's date of birth (YYYY-MM-DD)
        email:
          type: string
          description: The person's valid email address
        first_name:
          type: string
          description: The person's first name
        last_name:
          type: string
          description: The person's last name
        phone:
          type: string
          description: The person's 10-digit US phone number (e.g. 4152251000)
        percent_ownership:
          type: integer
          description: >-
            The percent ownership the person has in the business in basis points
            (e.g. 2500 for 25%)
        ssn:
          type: string
          description: The person's 9-digit US social security number (e.g. 123456789)
      required:
        - id
        - address
        - date_of_birth
        - email
        - first_name
        - last_name
        - phone
        - percent_ownership
        - ssn
    BusinessContact:
      type: object
      properties:
        first_name:
          type: string
        last_name:
          type: string
        phone:
          type: string
        email:
          type: string
        title:
          type: string
      required:
        - first_name
        - last_name
        - phone
        - email
        - title
    BusinessType:
      type: string
      enum:
        - corporation
        - llc
        - partnership
        - sole_proprietorship
    ConsumerBorrowerRequest:
      type: object
      properties:
        address:
          $ref: '#/components/schemas/Address'
          description: The address of the borrower
        date_of_birth:
          type: string
          description: The borrower's date of birth (YYYY-MM-DD)
          example: '1991-12-18'
        email:
          type: string
          description: The borrower's valid email address
          example: jdough@acme.co
        first_name:
          type: string
          description: The borrower's first name
          example: Jane
        last_name:
          type: string
          description: The borrower's last name
          example: Dough
        kyc_completion_date:
          type: string
          description: Date kyc completed on the borrower (YYYY-MM-DD)
          example: '2022-11-15'
        phone:
          type: string
          description: The borrower's 10-digit US phone number (e.g. 4152775050)
          example: '2065886919'
        ssn:
          type: string
          description: 9-digit social security number of the borrower (e.g. 345543221)
          example: '999888777'
      required:
        - address
        - date_of_birth
        - email
        - first_name
        - last_name
        - kyc_completion_date
        - phone
        - ssn
    ConsumerBorrower:
      type: object
      properties:
        address:
          $ref: '#/components/schemas/Address'
          description: The address of the borrower
        date_of_birth:
          type: string
          description: The borrower's date of birth (YYYY-MM-DD)
          example: '1991-12-18'
        id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
          description: The ID of the borrower
        email:
          type: string
          description: The borrower's valid email address
          example: jdough@acme.co
        first_name:
          type: string
          description: The borrower's first name
          example: Jane
        last_name:
          type: string
          description: The borrower's last name
          example: Dough
        kyc_completion_date:
          type: string
          description: Date kyc completed on the borrower (YYYY-MM-DD)
          example: '2022-11-15'
        phone:
          type: string
          description: The borrower's 10-digit US phone number (e.g. 4152775050)
          example: '2065886919'
        ssn:
          type: string
          description: 9-digit social security number of the borrower (e.g. 345543221)
          example: '999888777'
        created_on:
          type: string
          format: date-time
          description: The date the borrower was created
          example: '2022-12-31T00:58:47.828Z'
      required:
        - address
        - date_of_birth
        - id
        - email
        - first_name
        - last_name
        - kyc_completion_date
        - phone
        - ssn
        - created_on
    RejectionType:
      type: object
      properties:
        reason:
          type: string
        reason_message:
          type: string
      required:
        - reason
        - reason_message
    Address:
      type: object
      properties:
        line_1:
          type: string
        line_2:
          type: string
        city:
          type: string
        state:
          type: string
          description: 2-digit US state code (e.g. CA, IL, FL)
        zip:
          type: string
          description: 5-digit US zip code
      required:
        - line_1
        - city
        - state
        - zip
    CreditType:
      type: string
      enum:
        - installment_loan
        - revolving_line_of_credit
        - closed_line_of_credit
    BaseErrorBody:
      type: object
      properties:
        error_type:
          type: string
        error_code:
          type: string
        error_message:
          type: string
      required:
        - error_type
        - error_code
        - error_message
    InvalidInput:
      type: object
      properties:
        error_detail:
          type: array
          items:
            $ref: '#/components/schemas/ErrorDetail'
      required:
        - error_detail
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    ErrorDetail:
      type: object
      properties:
        value:
          type: string
        msg:
          type: string
        param:
          type: string
        location:
          type: string
      required:
        - value
        - msg
        - param
        - location
    DuplicateEin:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    DuplicateSsn:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    BorrowerNotFound:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    ApplicationNotFound:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    DocumentCannotBeCreated:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    DocumentCannotBeSigned:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    DocumentNotFound:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    FacilityCannotBeCreated:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    FacilityAlreadyExists:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    FacilityNotFound:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    FacilityCannotBeClosed:
      type: object
      properties: {}
      allOf:
        - $ref: '#/components/schemas/BaseErrorBody'
    CommercialCoverage: {}
    RejectionReasons:
      type: array
      items:
        type: object
        additionalProperties:
          type: string
    FacilityId:
      type: string
    Facility:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/FacilityId'
        application_id:
          $ref: '#/components/schemas/ApplicationId'
          description: >-
            The `application_id` of the corresponding loan application for the
            facility
        borrower_id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
          description: The `borrower_id` of the corresponding borrower the facility is for
        loan_agreement_id:
          type: string
          description: >-
            The `loan_agreement_id` of the corresponding loan agreement the
            facility is for
        credit_type:
          $ref: '#/components/schemas/CreditType'
          description: The type of credit production.
        created_on:
          type: string
          format: date-time
          description: Timestamp the loan agreement object is created on
        status:
          $ref: '#/components/schemas/CreditStatus'
          description: The status of the facility.
        terms:
          $ref: '#/components/schemas/LineOfCreditOffer'
          description: An object containing a summary of the terms of the facility.
      required:
        - id
        - application_id
        - borrower_id
        - loan_agreement_id
        - credit_type
        - created_on
        - status
        - terms
    CreditStatus:
      type: string
      enum:
        - active
        - closed
    CreateFacilityRequest:
      type: object
      properties:
        loan_agreement_id:
          $ref: '#/components/schemas/LoanAgreementId'
          description: >-
            The `loan_agreement_id` of the loan agreement to create a facility
            for
      required:
        - loan_agreement_id
    CloseFacilityRequest:
      type: object
      properties:
        facility_id:
          $ref: '#/components/schemas/FacilityId'
          description: The `facility_id` of the facility to close
      required:
        - facility_id
    LoanAgreementId:
      type: string
    CreateLoanAgreementRequest:
      type: object
      properties:
        application_id:
          $ref: '#/components/schemas/ApplicationId'
          description: >-
            The `application_id` of the application to create the loan agreement
            for
      required:
        - application_id
    LoanAgreement:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/LoanAgreementId'
        application_id:
          type: string
          description: >-
            The `application_id` of the corresponding loan application the
            agreement is for
        created_on:
          type: string
          description: Timestamp the loan agreement object is created on
        document_url:
          type: string
          description: Url where the loan agreement document is hosted
        signature_timestamp:
          type: string
          description: Timestamp of when e-signature is completed
        status:
          $ref: '#/components/schemas/LoanAgreementStatus'
          description: The status of the document
      required:
        - id
        - application_id
        - created_on
        - document_url
        - signature_timestamp
        - status
    LoanAgreementStatus:
      type: string
      enum:
        - pending_signature
        - signed
        - expired
    SignLoanAgreementRequest:
      type: object
      properties:
        loan_agreement_id:
          $ref: '#/components/schemas/LoanAgreementId'
      required:
        - loan_agreement_id
    SignLoanAgreementResponse:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/LoanAgreementStatus'
        id:
          $ref: '#/components/schemas/LoanAgreementId'
        application_id:
          $ref: '#/components/schemas/ApplicationId'
        signature_timestamp:
          type: string
          format: date-time
        document_url:
          type: string
        created_on:
          type: string
          format: date-time
      required:
        - status
        - id
        - application_id
        - signature_timestamp
        - document_url
        - created_on
  securitySchemes:
    BasicAuth:
      type: http
      scheme: basic
servers:
  - url: https://production.pier-finance.com/api
    description: Production
  - url: https://sandbox.pier-finance.com/api
    description: >-
      Sandbox (The sandbox is designed to mimic the production environment, with
      a few exceptions. 

      Loan agreements created in the sandbox will have large `draft` watermarks
      and funds flows will only occur in production. 

      Sandbox API keys are prefixed with `test_` while production API keys are 
      prefixed with `prod_`.

      )
